<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--><!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8"><![endif]--><!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9"><![endif]--><!--[if gt IE 8]><!--><html class="no-js">
<!--<![endif]--> <head> <meta charset="UTF-8"> <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <title>Cross compiler – Moon</title> <meta name="description" content="Moon is a minimal, one column jekyll theme for your blog."> <meta name="keywords" content="sample post, images, test"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="https://taylantatli.github.io/Moon/assets/img/logo.png"> <meta name="twitter:title" content="Cross compiler"> <meta name="twitter:description" content="Tìm hỉêu về compiler"> <meta name="twitter:site" content="@username"> <meta name="twitter:creator" content="@username"> <!-- Open Graph --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="Cross compiler"> <meta property="og:description" content="Tìm hỉêu về compiler"> <meta property="og:url" content="https://taylantatli.github.io/Moon/cross-compiler/"> <meta property="og:site_name" content="Moon"> <meta property="og:image" content="https://taylantatli.github.io/Moon/assets/img/logo.png"> <link rel="canonical" href="https://taylantatli.github.io/Moon/cross-compiler/"> <link href="https://taylantatli.github.io/Moon/feed.xml" type="application/atom+xml" rel="alternate" title="Moon Feed"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- CSS --> <link rel="stylesheet" href="https://taylantatli.github.io/Moon/assets/css/main.css"> <!-- JS --> <script src="https://taylantatli.github.io/Moon/assets/js/modernizr-3.3.1.custom.min.js"></script> <!-- Favicons --> <link rel="apple-touch-icon" href="https://taylantatli.github.io/Moon/assets/img/favicons/apple-icon-precomposed.png"> <link rel="apple-touch-icon" sizes="72x72" href="https://taylantatli.github.io/Moon/assets/img/favicons/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="114x114" href="https://taylantatli.github.io/Moon/assets/img/favicons/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="144x144" href="https://taylantatli.github.io/Moon/assets/img/favicons/apple-icon-144x144.png"> <link rel="shortcut icon" type="image/png" href="https://taylantatli.github.io/Moon/favicon.png"> <link rel="shortcut icon" href="https://taylantatli.github.io/Moon/favicon.ico"> <!-- Background Image --> <style type="text/css">body {background-image:url(https://taylantatli.github.io/Moon/assets/img/placeholder-big.jpg); background-repeat: no-repeat; background-size: cover; }</style> <!-- Post Feature Image --> </head> <body> <nav id="dl-menu" class="dl-menuwrapper" role="navigation"> <button class="dl-trigger">Open Menu</button> <ul class="dl-menu"> <li><a href="https://taylantatli.github.io/Moon/">Home</a></li> <li> <a href="#">About</a> <ul class="dl-submenu"> <li> <img src="https://taylantatli.github.io/Moon/assets/img/logo.png" alt="Moon photo" class="author-photo"> <h4>Moon</h4> <p>Moon is a minimal, one column jekyll theme for your blog.</p> </li> <li><a href="https://taylantatli.github.io/Moon/about/"><span class="btn btn-inverse">Learn More</span></a></li> <li> <a href="http://twitter.com/username" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-twitter-square"></i> Twitter</a> </li> <li> <a href="http://facebook.com/username" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-facebook-square"></i> Facebook</a> </li> <li> <a href="http://instagram.com/username" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-instagram"></i> Instagram</a> </li> <li> <a href="http://github.com/username" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-github"></i> Github</a> </li> <li> <a href="http://steamcommunity.com/id/username" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-steam-square"></i> Steam</a> </li> </ul>
<!-- /.dl-submenu --> </li> <li> <a href="#">Posts</a> <ul class="dl-submenu"> <li><a href="https://taylantatli.github.io/Moon/posts/">All Posts</a></li> <li><a href="https://taylantatli.github.io/Moon/tags/">All Tags</a></li> </ul> </li> <li><a href="https://taylantatli.github.io/Moon/projects/">Projects</a></li> </ul>
<!-- /.dl-menu --> </nav><!-- /.dl-menuwrapper --> <!-- Header --> <header class="header" role="banner"> <div class="wrapper animated fadeIn"> <div class="content"> <div class="post-title "> <h1>Cross compiler</h1> <h4>27 Jun 2017</h4> <p class="reading-time"> <i class="fa fa-clock-o"></i> Reading time ~2 minutes </p>
<!-- /.entry-reading-time --> <a class="btn zoombtn" href="https://taylantatli.github.io/Moon/posts/"> <i class="fa fa-chevron-left"></i> </a> </div> <h4 id="Định-nghĩa-trình-biên-dịch">Định nghĩa trình biên dịch</h4> <p>Trình biên dịch, còn gọi là phần mềm biên dịch, compiler, là một chương trình máy tính làm công việc dịch một chuỗi các câu lệnh được viết bằng một ngôn ngữ lập trình (gọi là ngôn ngữ nguồn hay mã nguồn), thành một chương trình tương đương nhưng ở dưới dạng một ngôn ngữ máy tính mới (gọi là ngôn ngữ đích) và thường là ngôn ngữ ở cấp thấp hơn, như ngôn ngữ máy. Chương trình mới được dịch này gọi mã đối tượng.</p> <h4 id="qúa-trình-biên-dịch">Qúa trình biên dịch</h4> <p>Ví dụ có chương trình sau được lưu dưới tên mytest.c</p> <figure class="highlight"><pre><code class="language-html" data-lang="html">#include <span class="nt">&lt;stdio</span><span class="err">.</span><span class="na">h</span><span class="nt">&gt;</span>
#include <span class="nt">&lt;math</span><span class="err">.</span><span class="na">h</span><span class="nt">&gt;</span>
#define PI 3.14
int main(int argc, char **argv)
{
    float x, y;
    x = PI / 3;
    y = cos(x);
    printf("gia tri cos(%f) = %f \n", x, y);
    return 1;
}</code></pre></figure> <p>Trong chương trình có sử dụng thư viện math.h. Trong quá trình linker sẽ tiến hành lấy mã của hàm printf() trong thư viện để kết hợp với mã thông thường khác.</p> <figure> <a href="http://farm9.staticflickr.com/8426/7758832526_cc8f681e48_b.jpg"><img src="http://farm9.staticflickr.com/8426/7758832526_cc8f681e48_c.jpg"></a> <figcaption><a href="http://www.flickr.com/photos/80901381@N04/7758832526/" title="Qúa trình biên dịch">Qúa trình biên dịch</a>.</figcaption> </figure> <h4 id="cross-compiler--toolchain-là-gì">Cross compiler / Toolchain là gì?</h4> <p>Có thể hiểu Cross compiler hay còn gọi là Toolchain như sau: Một source code được viết trên máy tính chạy chíp Intel (x86 platform), thông qua một cross compiler sẽ cho ra file nhị phân (mã máy) có khả năng chạy được trên một nên tảng chip khác là ARM (ARM platform). Trên hình native compiler là trình biên dịch để tạo ra file nhị phân chạy trên chính máy tính đang dùng để viết source code.</p> <h4 id="hệ-thống-cross-compiler">Hệ thống Cross compiler</h4> <p>Quá trình tạo và sử dụng Toolchain gồm 3 thành phần:</p> <ul> <li>Build System: Hệ thống/platform tạo ra toolchain</li> <li>Host System: Hệ thống chạy chương trình toolchain để compile source của chương trình ứng dụng.</li> <li>Target: Là hệ thống chạy các chương trình do hệ thống host tạo ra. <h4 id="cách-sử-dụng-cross-compiler-trên-một-hệ-thống-build-với-poky">Cách sử dụng cross compiler trên một hệ thống build với poky</h4> </li> <li>Chỉnh sửa sdk, thêm các gói cần thiết dùng để compile source. Ví dụ: $ {path}/package-core-standalone-sdk-target.bbappend</li> </ul> <figure class="highlight"><pre><code class="language-html" data-lang="html">RDEPENDS_${PN} += "\
linux-libc-headers-base-dev \
tzcslib-dev \
libtzcs-security-dev \
gtk+-dev \
"</code></pre></figure> <ul> <li> <p>Build meta-toolchain sau khi chỉnh sửa sdk bằng poky: $ bitbake meta-toolchain</p> </li> <li> <p>Copy sdk sang máy host để cài đặt: $ cp debian-eglibc-x86_64-meta-toolchain-x86_64-toolchain-8.0.sh <host_machine></host_machine></p> </li> <li> <p>Run script để cài đặt toolchain trên máy host. Script này sẽ set lại biến PATH để sử dụng build source $ source /opt/debian/8.0/environment-setup-x86_64-debian-linux</p> </li> <li> <p>Cuối cùng sử dụng ${CC} thay vì gcc trên máy host để compiler source: VD: ${CC} -g abc.c -o -lpthr -lX11 -ltzcs -ltzcs-s <code class="highlighter-rouge">pkg-config --cflags --libs gtk+-2.0</code></p> </li> </ul> <div class="entry-meta"> <br> <hr> <span class="entry-tags"><a href="https://taylantatli.github.io/Moon/tags/#sample%20post" title="Pages tagged sample post" class="tag"><span class="term">sample post</span></a><a href="https://taylantatli.github.io/Moon/tags/#images" title="Pages tagged images" class="tag"><span class="term">images</span></a><a href="https://taylantatli.github.io/Moon/tags/#test" title="Pages tagged test" class="tag"><span class="term">test</span></a></span> <span class="social-share"> <a href="https://www.facebook.com/sharer/sharer.php?u=https://taylantatli.github.io/Moon/cross-compiler/" title="Share on Facebook" class="tag"> <span class="term"><i class="fa fa-facebook-square"></i> Share</span> </a> <a href="https://twitter.com/intent/tweet?text=https://taylantatli.github.io/Moon/cross-compiler/" title="Share on Twitter" class="tag"> <span class="term"><i class="fa fa-twitter-square"></i> Tweet</span> </a> <a href="https://plus.google.com/share?url=https://taylantatli.github.io/Moon/cross-compiler/" title="Share on Google+" class="tag"> <span class="term"><i class="fa fa-google-plus-square"></i> +1</span> </a> </span> <div style="clear:both"></div> </div> </div> </div> <section id="disqus_thread" class="animated fadeInUp"></section><!-- /#disqus_thread --> </header> <!-- JS --> <script src="https://taylantatli.github.io/Moon/assets/js/jquery-1.12.0.min.js"></script> <script src="https://taylantatli.github.io/Moon/assets/js/jquery.dlmenu.min.js"></script> <script src="https://taylantatli.github.io/Moon/assets/js/jquery.goup.min.js"></script> <script src="https://taylantatli.github.io/Moon/assets/js/jquery.magnific-popup.min.js"></script> <script src="https://taylantatli.github.io/Moon/assets/js/jquery.fitvid.min.js"></script> <script src="https://taylantatli.github.io/Moon/assets/js/scripts.js"></script> <script type="text/javascript"> var disqus_shortname = 'taylantatli'; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); (function () { var s = document.createElement('script'); s.async = true; s.type = 'text/javascript'; s.src = '//' + disqus_shortname + '.disqus.com/count.js'; (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s); }()); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript> <!-- MathJax --> <script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>
